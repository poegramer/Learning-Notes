### 常用Linux命令

#### 网络和监控：
* netstat
* nmap
* zenmap
* watch
* uptime
* iftop
* tcpdump
* iostat

#### 系统管理：
* uname
* man
* screenfetch
* dpkg
* kill
* killall
* date
* locate
* whereis
* alias ----- 设置命令别名
* unalias ----- 取消命令的别名
* last ----- 系统登入情况
* awk
* free ----- 查看内存使用情况 -m/-g (M/G)
* history ------ 历史命令

#### 文件目录管理： 
|符号|目录    |
|:--:|:------:|
|~   |家目录  |
|.   |当前目录|
|/   |根目录  |

|命令  |作用|
|:----:|:------:|
|pwd   |查看当前工作目录|
|cd    |切换目录|
|ls    |查看目录中的文件|
|touch |创建空白文件和修改文件时间|
|mkdir |创建空白文件夹|
|cp    |复制文件或目录|
|mv    |移动文件或改名|
|rm    |删除文件或目录（-rf 通用）|
|rmdir |删除空目录，有文件则报错|
|dd    |指定大小拷贝文件或指定转换文件|

#### 文件操作：
|命令  |作用|
|:----:|:------:|
|cat   |查看纯文本（较短）|
|more  |查看纯文本（较长）|
|head  |查看文档前N行（-n 数字）|
|tail  |查看文档最后N行（-n 数字）|
|od    |查看特殊格式的文件（-t）|
|tr    |转换文本文件字符|
|wc    |统计文本行数（-l）、字数（-w）、字节数（-c）|
|cut   |通过列提取文本字符|
|diff  |比较文本的差异|

#### 用户管理：
|命令     |作用|
|:-------:|:------:|
|useradd  |创建新用户|
|passwd   |修改用户密码|
|userdel  |删除用户所有表格|
|usermod  |修改用户属性|
|groupadd |创建群组|

#### 下载：
* aria2c
* axel

#### packge软件管理：
* apt
* apt-get
* apt-fast
* aptitude

>While removing any installed package, Aptitude will automatically remove unused packages, while apt-get would need user to explicitly specify this by either adding additional option of ‘—auto-remove’ or specifying  ‘apt-get autoremove’.


#### 打包压缩文件：
* tar
>对文法打包压缩或解压（-c--压缩、-x--解压、-C--指定解压目录、-f--目标文件名、-v--显示过程、-z--用Gzip）
* 打包并压缩：tar -czvf xxx.tar.gz xxx
* 解压并展开：tar -xzvf xxx.tar.gz


#### 文件查询搜索：
* grep ----- 对文本进行搜索（grep 关键字 文件）
* find ----- 查找文件

------------------------------

### 重定向和环境变量

#### 重定向：
|符号  |作用 |
|:------:|:------:|
|命令 > 文件           |将标准输出重定向到一个文件中（清空文件数据）|
|命令 2> 文件          |将错误输出重定向到一个文件中（清空文件数据）|
|命令 >> 文件          |将标准输出重定向到一个文件中（追加在文件内容后面）|
|命令 2>> 文件         |将错误输出重定向到一个文件中（追加在文件内容后面）|
|命令 >> 文件 2>$1     |将标准输出和错误输出共同写入到文件中（追加在文件内容后面）|
|命令 < 文件           |将文件作为命令的标准输入|
|命令 << 分界符        |从标准输入中读入，直到遇见“分界符”停止|
|命令 < 文件1 > 文件2  |将文件1作为命令的标准输入，并将标准输出到文件2|

>###### 特殊文件：
* /dev/null ----- 空设备，丢弃所有写入其中的数据
* /dev/zero ----- 读取此文件时会提供无限的空字符（NULL、ASCII NUL、0x00）

##### 命令行通配符：
|符号  |作用  |
|:------:|:------:|
|*     |匹配0个或多个字符|
|？    |匹配任意单个字符|
|[0-9] |匹配范围内的数字|
|[abc] |匹配已出的任意字符|

##### 扩展字符：
|符号  |作用  |
|:------:|:------:|
|\（反斜杠）  |转义后面单个字符|
|''（单引号） |转义所有字符|
|""（双引号） |变量依然生效|
|``（反引号） |执行命令语句(Esc键下)|


#### 环境变量：
（变量名全大写）

##### PATH变量：

###### 执行命令的步骤：
1. 如果以相对/绝对路径输入的命令则直接执行（如执行 /bin/ls ）；
2. 检查是否为 alias 别名命令；
3. 由bash判断是“内部命令”还是“外部命令”；
     * 内部命令：属于解释器内部
     * 外部命令：独立于解释器外的命令文件
4. 通过 $PATH 变量中定义的路径进行命令查找。

>* 查看 $PATH 变量中的路径：echo $PATH
* 向 $PATH 中添加路径：PATH=$PATH:/xx/xx


##### 其他重要环境变量：
|环境变量  |作用    |
|:------:|:------:|
|HOME          |用户主目录|
|SHELL         |当前shell是那个程序|
|HISTSIZE      |历史命令记录条数|
|MAIL          |邮件信箱文件|
|LANG          |语系数据|
|RANDOM        |随机数字|
|PS1           |bash提示符|
|HISTFILESIZE  |history命令存储数量|
|PATH          |在路径中的目录查找执行文件|
|EDITOR        |默认文本编辑器|

>env ----- 查看所有环境变量

* 查看环境变量：echo $变量名    （如：echo $PATH）
* 定义环境变量：变量名=新的值  （如：WORK=/xx/xx）

>在某个用户下定义的环境变量不能被其他用户使用，其只是局部变量，作用范围只在本用户，要想被其他用户使用需要将其提升为全局变量。

>export ----- 将局部变量提升为全局变量
用法：export 变量名[=变量值]          如果之前已经定义好了变量值，此处可以省略

------------------------------------

### vim和shell

#### vim模式：

##### 命令模式：
|命令  |作用  |
|:------:|:------:|
|a、i、o   |进入输入模式|
|dd        |删除（剪切）光标所在整行|
|5dd       |删除（剪切）从光标开始的5行|
|yy        |复制光标所在整行|
|5yy       |复制从光标开始的5行|
|p         |粘贴|
|/字符串   |从上至下搜索该字符串|
|？字符串  |从下至上搜索该字符串|
|n         |显示搜索命令定位到的下一个字符串|
|N         |显示搜索命令定位到的上一个字符串|
|u         |撤销上一步的操作|

##### 末行模式：
|命令  |作用  |
|:------:|:------:|
|:w         |保存|
|:q         |退出|
|:q!        |强制退出|
|:wq!       |强制保存退出|
|:set nu    |显示行号|
|:set nonu  |不显示行号|
|:命令      |执行命令|
|:整数      |跳转到该行|


#### shell脚本：

##### 编写shell脚本：
1. 脚本声明    #！  告知系统用何种shell解释
2. 注释信息    #
3. 可执行语句

##### 执行shell脚本：
* 直接脚本文件路径
* sh 脚本文件路径
* source 脚本文件路径


##### 接收用户的参数：
|参数  |作用  |
|:------:|:------:|
|$0                          |shell脚本程序名|
|$1-9,$\{10\},$\{11\}\.\.\.  |参数的位置变量|
|$#                          |参数的个数|
|$*                          |所有位置变量的值|
|$?                          |判断上一条命令是否执行成功，0为成功，非0为失败|


##### 判断用户的参数:

###### 文件测试：
**[ 操作符 文件名或目录 ]**
如：[ -d /home/sun ]

|操作符  |作用    |
|:------:|:------:|
|-d      |测试是否为目录|
|-e      |测试文件或目录是否存在|
|-f      |判断是否为文件|
|-r      |测试当前用户是否有权限读取|
|-w      |测试当前用户是否有权限写入|
|-x      |测试当前用户是否有权限执行|

###### 逻辑测试：
**[ 表达式1 ] 操作符 [ 表达式2 ]**

|操作符  |作用    |
|:------:|:------:|
|&&           |逻辑与|
|&#124;&#124; |逻辑或|
|！           |逻辑否|

###### 整数值比较：
**[ 整数1 操作符 整数2 ]**

|操作符  |作用    |
|:------:|:------:|
|-eq     |判断是否等于|
|-ne     |判断是否不等于|
|-gt     |判断是否大于|
|-lt     |判断是否小于|
|-le     |判断是否小于等于|
|-ge     |判断是否大于等于|

###### 字符串比较：
**[ 字符串1 操作符 字符串2 ]**

|操作符  |作用    |
|:------:|:------:|
|=       |比较字符串内容是否相同|
|!=      |比较字符串内容是否不同|
|-z      |判断字符串内容是否为空|


##### 条件测试语句：

###### if条件语句：
    if then fi
    if then else fi
    if then elif else fi


>* read ----- 将用户输入的参数赋值给指定变量
>    * 用法： read -p "提示语" 变量名
>    * 如：read -p "Enter your score(0-100):" GRADE

###### for循环：
    for 变量名 in 取值列表
    do
        命令序列
    done


>* id ----- 查看显示目前登录账户的uid和gid及所属分组和用户名
* expr ----- 求表达式变量的值（表达式中运算符间需要空格）
    * expr 表达式
    * eg：echo `expr $RANDOM % 1000`  输出一个0-1000内的随机数
* let ----- 计算表达式的值（表达式中无空格）
    * let 表达式
    * eg：let n=$RANDOM%1000，echo $n  同上，取随机数      let n++


###### while循环：
    while 条件测试操作
    do
        命令序列
    done

###### case条件语句：
    case 变量值 in
    模式1）
        命令序列1
        ;;
    模式2）
        命令序列2
        ;;
    
        ......
    
    *)
        默认命令序列
    esac


#### 计划任务服务：

##### 一次性任务：
|命令    |作用    |
|:------:|:------:|
|at 时间        |安排一次性任务|
|atq 或 at -l   |查看任务列表|
|at -c 序号     |预览任务与设置环境|
|atrm 序号      |删除任务|

###### 交互式：
（输入完后Ctrl+d保存退出）

    at 时间
    \>命令
    \>...

###### 非交互式：

    echo “命令” | at 时间


##### 长期任务：
|命令    |作用    |
|:------:|:------:|
|crontab -l   |查看计划任务|
|crontab -e   |创建、编辑计划任务（select-editor选择编辑器）|
|crontab -r   |删除计划任务|

###### 创建、编辑任务格式：
    分钟 小时 日期 月份 星期 命令
（不存在用\*代替）
eg：25 23 \* \* 1,3,5 shutdown

|字段    |说明    |
|:------:|:------:|
|分钟  |0-59整数|
|小时  |0-23整数|
|日期  |1-31整数|
|月份  |1-12整数|
|星期  |0-7整数，0和7均为星期日|
|命令  |命令或程序脚本|

-----------------------


### 文件权限

**所属：** 所有者（属主）、所有组（属组）、其余人
**权限：** 读（r）、写（w）、执行（x）

  >用数字表示：4----读、2----写、1----执行
  >数字组合权限：7（rwx）、6（rw）、5（rx）、3（wx）

* **ls -l 文件 ----- 查看文件信息**

    >eg：ls -l nmap.txt
        -rw-rw-r-- 1 sun sun 111974 11月  6 11:48 nmap.txt

    |字母符号|含义|
    |:------:|:------:|
    |第一个- |文件类型|
    |rw      |所有者访问权限|
    |rw      |所有组访问权限|
    |r       |其余人访问权限|

#### 文件类型：

|文件标识|类型    |
|:------:|:------:|
|-   |普通文件（实际保存数据的地方，不具备删除自身的权限）|
|d   |目录文件（保存目录结构和文件权限）|
|l   |链接文件|
|b   |块设备文件|
|c   |字符设备文件|
|p   |管道文件|


#### 文件特殊权限：
##### SUID：
  ------让执行者临时拥有属主的权限（仅对拥有执行权限的二进制程序有效）
##### SGID：
  ------让执行者临时拥有属组的权限（对拥有执行权限的二进制程序设置）
  ------在该目录中创建的文件自动继承此目录的用户组（只可以对目录设置）

  * **chmod ----- 修改文件或目录的权限**
      格式：chmod [参数] 权限 文件或目录名称
  * **chown ----- 修改文件或目录的所属主与所属组**
      格式：chown [参数] 所属主:所属组 文件或目录名称

  >命令参数：对于文件不加参数，遇目录加大写-R（递归，修改目录内所有文件的属性）

##### SBIT（Sticky Bit）：
  ------只可管理自己的数据而不能删除他人文件（仅对目录有效）-----粘滞位


#### 文件隐藏权限：
* **chattr ----- 设置文件的隐藏权限**
    格式：chattr [参数] 文件

    |参数    |作用    |
    |:------:|:------:|
    |i   |将无法对文件进行修改，若对目录设置后则只能修改子文件而不能新建或删除|
    |a   |仅允许追加内容，无法覆盖或删除|
    |S   |文件内容变更后立即同步到硬盘|
    |s   |彻底从硬盘中删除，不可恢复（用0填充原文件所在硬盘区域）|
    |A   |不再修改这个文件的最后访问时间|
    |b   |不再修改文件或目录的存取时间|
    |D   |检查压缩文件中的错误|
    |d   |当使用dump命令备份时忽略本文件/目录|
    |c   |默认将文件或目录进行压缩|
    |u   |当删除此文件后依然保留其在硬盘中的数据，方便日后恢复|
    |t   |让文件系统支持尾部合并|
    |X   |可以直接访问压缩文件的内容|

* **lsattr ----- 显示文件的隐藏权限**
    格式：lsattr [参数] 文件

    |参数    |作用    |
    |:------:|:------:|
    |a   |显示所有文件和目录|
    |l   |显示隐藏属性的全程（默认简写成一个字母）|
    |R   |递归处理，将指定目录下的所有文件及子目录一并处理|
    |d   |若目标文件为目录则加此参数|


#### su和sudo：

* **su**
    * 用于变更使用者的身份（切换登录者）
    * 格式：su [-] 用户名

* **sudo** 
    * 用于给普通用户提供额外权利来完成原本root用户才能完成的任务
    * 格式：sudo [参数] 用户名
    * sudo特色功能：
      1. 限制用户执行指定的命令
      2. 记录用户执行的每一条命令
      3. 配置文件（/etc/sudoers）提供集中的管理用户、权限与主机等参数
      4. 验证过密码后5分钟（默认值）内无须再让用户验证密码

    |参数    |作用    |
    |:------:|:------:|
    |-h  |列出帮助信息|
    |-l  |列出当前用户可执行的命令|
    |-u  |已指定的用户身份执行命令|
    |-k  |清空安全时间，下次执行sudo时需要再次验证密码|
    |-b  |在后台执行指定的命令|
    |-p  |更改询问密码的提示语|


#### 文件访问控制列表（ACL）：
* **setfacl ----- 增加或修改ACL规则**

    格式：setfacl [参数] 文件

    |参数    |作用    |
    |:------:|:------:|
    |-R  |递归（对目录使用）|
    |-m  |设置文件的ACL规则|
    |-b  |删除ACL规则|

* **getfacl ----- 显示文件的ACL规则**

    格式：getfacl 文件

#### 对比：

|权限    |作用    |
|:------:|:------:|
|rwx权限、特殊权限、隐藏权限 |对某一类用户权限设置|
|ACL |对某个指定的用户进行单独的权限设置，设置指定的特定用户或用户组对某个文件或目录的操作权限|

  >若对某个目录设置了访问控制策略，则子文件继承其访问策略；

  >若对某个文件设置了访问控制策略，则不再继承上级目录的控制策略。

----------------------------


### 存储结构与硬盘划分

#### 文件目录定义：

|目录        |定义|
|------------|------|
|/boot       |开机所需文件 ———— 内核、开机菜单及所需配置文件等|
|/dev        |任何设备与接口都以文件形式存放在此目录|
|/etc        |配置文件|
|/home       |用户主目录|
|/bin        |单用户维护模式下还能够被操作的命令|
|/lib        |开机时用到的函数库及/bin与/sbin下面命令要调用的函数|
|/sbin       |开机过程中需要的|
|/media      |一般挂载或删除的设备|
|/opt        |放置第三方的软件|
|/root       |系统管理员的主文件夹|
|/srv        |一些网络服务的数据目录|
|/tmp        |任何人均可使用的“共享”临时目录|
|/proc       |虚拟文件系统，例如系统内核、进程、外部设备及网络状态等|
|/usr/local  |用户自行安装的软件|
|/usr/sbin   |非系统开机时需要的软件/命令/脚本|
|/usr/share  |帮助与说明文件，也可放置共享文件|
|/var        |主要存放经常变化的文件，如日志|
|/lost+found |当文件系统发生错误时，将一些丢失的文件片段放在这里|


#### 路径：
* 绝对路径：由根目录（/）开始写起的目录或文件
* 相对路径：相对于当前路径的写法

#### 物理设备：
* 系统内核的设备管理器（Udev）会一直以守护进程的形式运行并侦听来自内核发出的uevent来管理/dev目录下的设备文件；
*  dev会根据内核发出的uevent来动态添加或删除/dev目录中的设备文件；

|硬件设备|命令|
|:------:|:------:|
|IDE设备       |/dev/hd[a-d]|
|SCSI/SATA/U盘 |/dev/sd[a-p]|
|软驱          |/dev/fd[0-1]|
|打印机        |/dev/lp[0-15]|
|光驱          |/dev/cdrom|
|鼠标          |/dev/mouse|
|磁带机        |/dev/st0或/dev/ht0(IDE设备)|

  >eg：/dev/sda5　－－－＞　/dev/sd[a-p]
  >　　　a　为硬盘的顺序号
  >　　　5 为硬盘分区编号

* 硬盘分区：
    * 主分区编号从1开始至4结束（也可指定分配数字）
    * 逻辑分区从编号5开始按顺序（也可指定分配数字）

#### 文件系统：
* **Ext3：**
  日志文件系统，能够在异常停机中避免文件系统资料不一致的情况，自动修复数据的不一致与错误；它会将整个磁盘的写入动作预先记录下来（每个细节），所以在异常停机后可以回溯追踪到被中断的部分。
* **Ext4：**
  可以成为Ext3的后继版本，支持更大的文件系统到1EB，能够批量分配block块并作“Extents”极大的提高了读写效率。
* **XFS：**
  日志型文件管理系统，在意外关机后可以快速恢复可能被破坏的文件，另外经过优化后日志功能对硬盘性能影响非常小，同时最大支持18EB的存储容量。


#### 挂载硬件设备：
* **mount ------ 挂载文件系统**  
    格式：mount 文件系统 挂载目录  
    eg：mount /dev/sdb2 /backup （将设备/dev/sdb2挂载到/backup目录）

    |参数    |作用|
    |:------:|:------:|
    |a   |挂载所有在/etc/fstab中定义的文件系统|
    |-t  |指定文件系统的类型|

  >**注：**
使用mount命令挂载后立即就可以使用该文件系统，但重启后则失败；如果想让重启后依然生效，必须将挂载信息写入/etc/fstab文件中。

* **/etc/fstab文件填写格式：**  
    设备文件 挂载目录 格式类型 权限选项 自检 优先级

    |格式项  |说明|
    |:------:|:------:|
    |设备文件    |一般为设备的路径+名称，也可以写UUID值等|
    |挂载目录    |指定要挂载的目录，需挂载前创建好|
    |格式类型    |指定文件系统的格式，比如有：ext3、ext4、xfs、iso9660、swap …… （挂载光盘镜像时设置为iso9660）|
    |权限选项    |默认为defaults（rw、suid、dev、exec、auto、nouser、async），可指定acl或quota等|
    |自检        |若为1则开机后进行硬盘自检，0为不自检|
    |优先级      |若“自检”为1，则可对多块硬盘进行优先级设置|

* **umount ------ 撤销已经挂载的设备文件**  
    格式：umount 挂载点或设备文件  
    eg：umount /dev/sdb2


#### 添加硬盘设备：
1. **进行硬盘分区：**
    * **fdisk ------ 管理硬盘分区**  
      用法：“fdisk 硬盘名称”进入硬盘管理，输入参数进行操作
    
        |参数|作用|
        |:------:|:------:|
        |m       |查看全部可用的参数|
        |n       |添加新的分区|
        |d       |删除某个分区信息|
        |l       |列出所有可用的分区类型|
        |t       |改变某个分区的类型|
        |p       |查看分区表信息|
        |w       |保存并退出|
        |q       |不保存直接退出|

2. **格式化文件系统：**
    * **mkfs.文件系统类型 硬盘分区**  
      eg：mkfs.xfs /dev/sdb1
3. **挂载硬盘设备：**  
    写/etc/fstab文件，设置系统启动后自动挂载该硬盘设备


#### 查看文件系统的使用情况：
* **df ------ 查看挂载点信息与磁盘使用量**  
    格式：df 参数 挂载点

    |参数    |作用|
    |:------:|:------:|
    |-a      |显示出所有的文件系统（包括虚拟的）|
    |--total |展示出总体使用量|
    |-h      |更易读的容量格式|
    |-i      |展示出Inode的信息（默认是磁盘使用信息）|
    |-T      |展示出文件系统的类型|

* **du ------ 查看硬盘的使用量**  
    格式：du 参数 文件目录

    |参数    |作用|
    |:------:|:------:|
    |-a      |评估每个文件而非目录整体占用量|
    |-c      |评估每个文件并计算出总占用量总和|
    |-h      |更易读的容量格式|
    |-s      |仅显示占用量总和|


#### 磁盘冗余阵列（RAID）：
  作用：防止硬盘物理损坏以及增加存储设备的吞吐量

* **RAID0（striping）：**
  至少2块硬盘，将多块硬盘通过硬件或软件的方式串联，数据依次写入各个硬盘中，可提高硬盘性能和吞吐量，但没有数据的冗余和错误修复能力，任意一块硬盘故障则整个系统的数据都会受到破坏；

* **RAID1（mirroring）：**
  至少2块硬盘，数据写入硬盘时，在另一块闲置的硬盘上生成镜像文件，可有效提高数据资料的安全性和可修复性，具有很好的硬盘冗余能力，但成本增加，硬盘利用率降低，仅为50%；

* **RAID5（parity across disks）：**
  至少3块硬盘，每块硬盘保存其他硬盘数据的奇偶校验信息“parity”，以数据的奇偶校验信息来保证数据的安全，硬盘损坏后可以根据其他盘上的奇偶校验信息尝试重建损坏的数据，性能高，兼顾了存储性能、数据安全和存储成本；

* **RAID10：**
  至少4块硬盘，先RAID1组合，再RAID0组合，兼具速度和安全性，但成本高；


#### 逻辑卷管理器（LVM）：
* 当用户根据实际情况需要对分区增加、减小等调整时，经常会受到硬盘“灵活性”的限制，很不方便；
* LVM则是在硬盘分区和文件系统之间添加的逻辑层，提供一个抽象的卷组，使得管理者可以忽略底层磁盘布局，从而实现对分区的灵活动态调整。

|名词    |说明    |
|:------:|:------:|
|物理卷（PV）   |整个硬盘设备或使用fdisk命令建立的硬盘分区|
|卷组（VG）     |由一个或多个物理卷组成的整体|
|逻辑卷（LV）   |从卷组中切割出的空间用于创建文件系统，大小由PE的个数决定|
|基本单元（PE） |默认为4MB的基本块|


#### 磁盘容量配额：
* **quota服务：**
    * 为每个用户限制可以使用的硬盘空间，一旦超出预算就不再允许使用；
    * quota的磁盘配额可以限制用户的硬盘可用空间或最大创建文件数量；

    >**软限制：** 当达到软限制时会提示用户，但允许用户在规定期限内继续使用  
    **硬限制：** 当达到软限制时会提示用户，且强制终止用户的操作

* **xfs_quota ------ 管理XFS文件系统的quota硬盘配额**
    格式： xfs_quota [参数] 配额 文件系统

    |参数    |作用|
    |:------:|:------:|
    |-c 命令 |以交换式或参数的形式设置要执行的命令|
    |-p      |设置提示或报错信息的程序名称，默认为xfs_quota|
    |-x      |专家模式，能够对quota做更多复杂的配置|

* **edquota ------ 用于超级用户编辑其他用户的quota配额限制**
    格式：edquota [参数] 用户
    
    |参数    |作用|
    |:------:|:------:|
    |-u      |编辑用户的配额限制|
    |-g      |编辑用户组的配额限制|
    |-r      |通过RPC协议编辑远程的配额|

* **dmesg ------ 查看开机信息**


#### 虚拟文件系统（VFS）：
* 在Linux内核中的软件层为用户程序提供了一个系统接口VFS，使得对众多的文件系统的操作就转而统一为对这个VFS进行的操作；
* 实际文件系统在VFS下隐藏了自己的特性和细节，使得我们在日常使用时觉得“文件系统都是一样的”。


#### 软硬方式链接：
* **ln ------ 创建链接文件**
    （即创建文件的快捷方式，有两种不同类型的文件快捷方式）
    格式：ln [参数] 目录
    创建硬链接：ln 文件名 链接名
    创建软链接：ln -s 文件名 链接名
    
    |参数    |作用|
    |:------:|:------:|
    |-s      |创建“符号链接”（默认是硬链接）|
    |-f      |强制创建文件或目录的链接|
    |-i      |覆盖前先询问|
    |-v      |显示创建链接的过程|

    >* **硬链接：**
        指向原始文件inode的指针，硬链接文件与原始文件其实是同一个文件，只是名字不同，即使原始文件被删除依然可以通过链接文件访问，但是不能跨文件系统，也不能链接目录文件；
    * **软链接（符号链接）：**
        仅仅包含它索要链接文件的路径名，能做目录链接也可以跨越文件系统，但原始文件被删除后链接文件也失效，类似与Windows中的“快捷方式”；

------------------------------


### iptables与firewalld防火墙

  >iptables服务和firewalld服务都不是真正的防火墙，只是用来定义防火墙规则功能的“防火墙管理工具”，将定义好的规则交由内核中的netfilter即网络过滤器来读取，从而真正实现防火墙功能。

#### iptables:
（用于创建数据过滤与NAT规则）

* **iptables ------ 用于管理防火墙的规则策略**
（在iptables命令中设置数据过滤或处理数据包的策略叫做规则，将多个规则合成一个链；）
    格式：iptables [-t 表名] 参数 [链名] [条件] [-j 控制类型]
    
    |参数    |作用|
    |:------:|:------:|
    |-P      |设置默认策略：iptables -P INPUT (DROP|ACCEPT)|
    |-F      |清空规则链|
    |-L      |查看规则链|
    |-A      |在规则链的末尾加入新规则|
    |-I num  |在规则链的头部加入新规则|
    |-D num  |删除某一条规则|
    |-s      |匹配来源地址IP/MASK，加“!”表示除这个IP外|
    |-d      |匹配目标地址|
    |-i 网卡名称 |匹配从这块网卡流入的数据|
    |-o 网卡名称 |匹配从这块网卡流出的数据|
    |-p      |匹配协议，如tcp、udp、icmp等|
    |--dport num |匹配目标端口号|
    |--sport num |匹配来源端口号|

##### 控制类型：

|参数    |作用|
|:------:|:------:|
|ACCEPT  |允许通过|
|LOG     |记录日志信息，然后传给下一条规则继续匹配|
|REJECT  |拒绝通过，必要时会给出提示|
|DROP    |直接丢弃，不给出任何回应|

##### 规则链：
（依据处理数据包的位置不同而进行分类）

|参数    |作用|
|:------:|:------:|
|PREROUTING  |在进行路由选择前处理数据包|
|INPUT       |处理入站的数据包|
|OUTPUT      |处理出站的数据包|
|FORWARD     |处理转发的数据包|
|POSTROUTING |在进行路由选择后处理数据包|

##### 规则表：
（用于容纳规则链）

|参数    |作用|
|:------:|:------:|
|raw表   |确定是否对该数据包进行状态跟踪|
|mangle表|为数据包设置标记|
|nat表   |修改数据包中的源、目标IP地址或端口|
|filter表|确定是否放行该数据包（过滤）|


>规则表默认是允许状态的，则规则链就是设置被禁止的规则；
反之，规则表是禁止状态的，则规则链就是设置被允许的规则；

>* **规则表的先后顺序：**
    raw ——> mangle ——> nat ——> filter

>* **规则链的先后顺序：**
    入站顺序：PREROUTING ——> INPUT
    出站顺序：OUTPUT ——> POSTROUTING
    转发顺序：PREROUTING ——> FORWARD ——> POSTROUTING

>* **注：**
    * 没有指定规则表则默认指filter表；
    * 不指定规则链则指表内所有的规则链；
    * 在规则链中匹配规则时会依次检查，匹配即停止（LOG规则例外），若没有匹配项则按链的默认状态处理；



































